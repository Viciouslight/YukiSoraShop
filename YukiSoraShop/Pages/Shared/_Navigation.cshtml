@{
    var isAuthenticated = User?.Identity?.IsAuthenticated == true;
    var userName = User?.Identity?.Name ?? "";
}

<ul class="navbar-nav me-auto">
    <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
    </li>

    @if (isAuthenticated)
    {
        if (User.IsInRole("Administrator"))
        {
            <li class="nav-item">
                <a class="nav-link" href="/Admin/Dashboard">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/Admin/AccountManagement">
                    <i class="fas fa-users-cog"></i> Accounts
                </a>
            </li>
        }
        else if (User.IsInRole("Moderator"))
        {
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                    <i class="fas fa-box"></i> Quản lý sản phẩm
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a class="dropdown-item" href="/Staff/Products/List">
                            <i class="fas fa-list"></i> Danh sách sản phẩm
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="/Staff/Products/Create">
                            <i class="fas fa-plus"></i> Thêm sản phẩm
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="/Staff/Categories/List">
                            <i class="fas fa-tags"></i> Quản lý danh mục
                        </a>
                    </li>
                </ul>
            </li>
        }
    }
</ul>

<ul class="navbar-nav">
    @if (!isAuthenticated)
    {
        <li class="nav-item">
            <a class="nav-link" href="/Auth/Login">
                <i class="fas fa-sign-in-alt"></i> Đăng nhập
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/Auth/Register">
                <i class="fas fa-user-plus"></i> Đăng ký
            </a>
        </li>
    }
    else
    {
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                <i class="fas fa-user"></i> @userName
                @if (User.IsInRole("Administrator"))
                {
                    <span class="badge bg-danger ms-1">Admin</span>
                }
                else if (User.IsInRole("Moderator"))
                {
                    <span class="badge bg-warning ms-1">Staff</span>
                }
            </a>
            <ul class="dropdown-menu">
                <li>
                    <a class="dropdown-item" href="/Customer/Profile">
                        <i class="fas fa-user-circle"></i> Profile
                    </a>
                </li>
                <li>
                    <a class="dropdown-item" href="/Customer/MyOrders">
                        <i class="fas fa-receipt"></i> Đơn hàng của tôi
                    </a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                    <form asp-page="/Auth/Logout" method="post" class="px-3 py-1">
                        <button type="submit" class="dropdown-item">
                            <i class="fas fa-sign-out-alt"></i> Đăng xuất
                        </button>
                    </form>
                </li>
            </ul>
        </li>
    }

    <li class="nav-item">
        <a class="nav-link" href="/Customer/Cart">
            <i class="fas fa-shopping-cart"></i> Cart
            <span class="badge bg-danger" id="cartCount">0</span>
        </a>
    </li>
</ul>
